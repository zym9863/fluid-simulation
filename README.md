# 基于SPH算法的流体模拟

中文 | [English](README_EN.md)

这是一个使用Three.js和SPH（Smoothed Particle Hydrodynamics，光滑粒子流体动力学）算法实现的流体模拟应用。该应用可以模拟水流效果，并支持与物体的交互。

## 功能特点

- 基于SPH算法的真实流体物理模拟
- 3D可视化流体粒子
- 支持与障碍物的交互（可拖动球体障碍物）
- 支持重置模拟
- 支持相机控制（旋转、缩放）

## 技术栈

- Three.js - 3D渲染库
- Vite - 构建工具
- SPH算法 - 流体模拟算法

## 如何运行

1. 确保已安装Node.js环境
2. 安装依赖：
   ```
   npm install
   ```
3. 启动开发服务器：
   ```
   npm run dev
   ```
4. 在浏览器中打开显示的URL（默认为http://localhost:3000）

## 使用说明

- **拖动球体**：点击并拖动中央的球体，与流体交互
- **重置模拟**：按空格键重置整个模拟
- **旋转视角**：点击并拖动空白区域旋转相机视角
- **缩放视图**：使用鼠标滚轮放大或缩小视图

## SPH算法简介

SPH（Smoothed Particle Hydrodynamics）是一种用于模拟流体动力学的无网格拉格朗日方法。它通过将流体离散为一组交互粒子来工作，每个粒子携带物理量（如质量、速度、密度等）。

主要计算步骤包括：

1. 密度计算：使用核函数计算每个粒子的密度
2. 压力计算：基于密度计算每个粒子的压力
3. 力的计算：计算压力力、粘度力、表面张力等
4. 位置更新：根据合力更新粒子的速度和位置
5. 碰撞处理：处理粒子与边界和障碍物的碰撞

## 项目结构

- `src/sph/` - SPH算法实现
  - `SPHParticle.js` - 粒子类
  - `SPHSystem.js` - SPH系统
  - `Obstacle.js` - 障碍物类
- `src/rendering/` - 渲染相关
  - `FluidRenderer.js` - 流体渲染器
- `src/main.js` - 主应用程序
- `index.html` - HTML入口文件